# üìä An√°lise do Funcionalismo P√∫blico no Brasil com Dados da RAIS

## Vis√£o Geral

Este projeto utiliza a base de dados da **RAIS (Rela√ß√£o Anual de Informa√ß√µes Sociais)**, disponibilizada pela plataforma **Base dos Dados**, para analisar a evolu√ß√£o do funcionalismo p√∫blico no Brasil ao longo dos anos. A partir dos dados, realizamos uma an√°lise explorat√≥ria e visualiza√ß√£o gr√°fica da distribui√ß√£o de v√≠nculos empregat√≠cios no setor p√∫blico.

Os dados s√£o acessados diretamente da plataforma [**Base dos Dados**](https://basedosdados.org/) utilizando a linguagem **R** e o pacote `basedosdados`.

------------------------------------------------------------------------

## üìÇ Estrutura do Projeto

-   `rais.R` ‚Üí Cont√©m os c√≥digos R utilizados na an√°lise
-   `.keys` ‚Üí Cont√©m o `ID_PROJECT` do Google Cloud
-   `data/` ‚Üí Pasta para armazenar os dados baixados (se necess√°rio)
-   `README.md` ‚Üí Este arquivo, com a explica√ß√£o detalhada do projeto

------------------------------------------------------------------------

## üõ†Ô∏è Configura√ß√£o e Depend√™ncias

### **1Ô∏è‚É£ Instalar Pacotes Necess√°rios**

Antes de rodar o c√≥digo, instale os pacotes necess√°rios:

``` r
install.packages("basedosdados")
install.packages("tidyverse")
install.packages("ggplot2")
install.packages("geobr")
install.packages("ggthemes")
install.packages("scales")
```

### **2Ô∏è‚É£ Autentica√ß√£o no Google Cloud**

Para acessar os dados da **RAIS** no `basedosdados`, √© necess√°rio configurar um projeto no Google Cloud e autenticar a API. Eu adicionei um arquivo `.keys` na pasta contendo meu `ID_PROJECT` e fiz a leitura com o c√≥digo abaixo:

``` r
library(basedosdados)
file.path(getwd(), ".keys") |> 
  readLines() |> 
  trimws() |> 
  basedosdados::set_billing_id()
```

------------------------------------------------------------------------

## üìä Coleta de Dados

Utilizamos o pacote `basedosdados` para consultar a base da RAIS e extrair informa√ß√µes sobre o quantitativo de v√≠nculos empregat√≠cios no setor p√∫blico, categorizados por esfera de governo (Federal, Estadual e Municipal) e poder (Executivo, Legislativo e Judici√°rio).

Primeiramente, estabelecemos a conex√£o com a tabela desejada e obtemos um vislumbre de como os dados est√£o organizados.

Para coletar os dados de fato, podemos aplicar filtros e sele√ß√µes utilizando as fun√ß√µes do framework `tidyverse` e, em seguida, realizar a extra√ß√£o com a fun√ß√£o `bd_collect()` do pacote `basedosdados`.

Alternativamente, √© poss√≠vel especificar uma query **SQL** diretamente para filtrar e selecionar os dados, coletando-os com a fun√ß√£o `read_sql()`. Neste primeiro momento, optei pelo uso das fun√ß√µes do `tidyverse` para um tratamento mais flex√≠vel e integrado.

``` r
library(basedosdados)
library(tidyverse)

# Estabelecendo conex√£o e visualizando a estrutura dos dados
dados_rais <- basedosdados::bdplyr("basedosdados.br_me_rais.microdados_estabelecimentos")
dados_rais |> 
  glimpse()

# coletando dados sobre funcionalismo publico ####
tabela_funcionalismo <- dados_rais |> 
  select(
    ano, 
    sigla_uf, 
    natureza_juridica, 
    quantidade_vinculos_ativos
    ) |>
  filter(
    sigla_uf != "IGNORADO",
    natureza_juridica %in% c(
      "1015", "1023", "1031", "1040", "1058", "1066", "1074", "1082"
      )
  ) |>
  group_by(
    ano, 
    sigla_uf, 
    natureza_juridica
    ) |> 
  summarise(
    numero_vinculos = sum(quantidade_vinculos_ativos, na.rm = T),
    .groups = "drop"
  ) |>
  basedosdados::bd_collect()
```

Os principais passos da coleta de dados incluem:

1.  Estabelecer conex√£o com a RAIS via basedosdados.
2.  Filtrar os dados para remover registros desconhecidos.
3.  Selecionar apenas as naturezas jur√≠dicas do setor p√∫blico.
4.  Agregar os v√≠nculos por estado, poder e esfera.

------------------------------------------------------------------------

## üìà Visualiza√ß√£o de Dados

Para facilitar a compreens√£o da evolu√ß√£o do funcionalismo p√∫blico, s√£o gerados dois tipos de visualiza√ß√µes:

### 1Ô∏è‚É£ Gr√°fico de Linha - Evolu√ß√£o dos V√≠nculos Empregat√≠cios

O gr√°fico de linha mostra a evolu√ß√£o do n√∫mero de v√≠nculos ativos entre **2020** e **2023**, diferenciando entre **Executivo, Legislativo e Judici√°rio**. A visualiza√ß√£o utiliza a biblioteca `ggplot2` e o tema `fivethirtyeight`.

### 2Ô∏è‚É£ Mapa de Calor - Distribui√ß√£o por Estado

Utilizando o pacote `geobr`, geramos um mapa de calor para visualizar a distribui√ß√£o geogr√°fica dos v√≠nculos no funcionalismo p√∫blico em **2023**. Os estados com maior concentra√ß√£o de servidores s√£o destacados com diferentes gradientes de cor.

------------------------------------------------------------------------

## üìå Contato

Caso tenha d√∫vidas ou sugest√µes, fique √† vontade para contribuir!

üìß **Email:** [mandicneves\@gmail.com](mailto:mandicneves@gmail.com){.email}\
üìÇ **GitHub:** [github.com/mandicneves](https://github.com/mandicneves)

üõ†Ô∏è **Contribui√ß√µes s√£o bem-vindas!** Caso queira colaborar, abra uma issue ou envie um pull request. üöÄ
